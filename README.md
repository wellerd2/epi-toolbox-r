# Epi Toolbox for R

`epi-toolbox-r` is a collection of helper functions for working with epidemiologic and surveillance data, as well as utilities for loading and managing data files in R and formatting analytical outputs for visualization.

## Function overview

### `loadRData()`
Loads an `.RData` file and returns the object created by the `load()` call. Intended for quick programmatic access to saved R objects so the R objects can be renamed as they are loaded.

### `compare_periods()`
Summarizes and compares model-based expected counts and incidence rates across two user-defined time periods using model outputs generated by the FoodNetTrends workflow (https://github.com/CDCgov/FoodNetTrends). The function **compare_periods_by_species** can be used to compare periods stratifying by species (or other characteristics you used when speciyfing the spline in the trends model).

### `calculate_average_annual_incidence()`
Calculates average annual incidence per 100,000 population by aggregating case-level disease data and population denominators over a specified year range. Supports flexible grouping variables (e.g., by age group, sex, race, ethnicity) and explicit handling of missing factor levels.

### `lab_fun()`
Italicises Genus and species names for use in plotting.

### `get_headers()`
Reads and returns column names from a SAS dataset by loading only the first row. Useful for validating header consistency across multiple SAS files before batch processing.

### `process_file()`
Reads a wide-format SAS census file, reshapes population data to long format, parses demographic codes into ethnicity, race, sex, and age groups, and aggregates population counts across demographic strata.

### `build_aggregated_census_denominators()`
Generates an aggregated population denominator dataset from one or more wide-format SAS census files, where population counts are stored in separate columns for sexâ€“race/ethnicity combinations and each row corresponds to a unique state, year, and age. Performs file discovery, header consistency checks, file-level processing, row binding, and optional CSV output.

### PowerCalculation
This is a .Rmd file that includes two functions:
1. `powerfinder()` that simulates longitudinal binary data with within-unit correlation and then fits a GEE model to test the condition effect.
2. `unitfinder()` that searches over candidate n_unit values to find the minimum that achieves target_power.

## Dependencies

Functions in this repository rely on commonly used R packages, including: `dplyr`; `tidyr`; `stringr`; `forcats`; `rlang`; `haven`; `gtools`; `bayestestR`.

Some functions assume upstream model outputs generated using packages, such as `brms`, though models are not fit within this repository.

## Usage

Functions can be loaded individually, for example:

```r
source("R/compare_periods_by_species.R")
source("R/calculate_average_annual_incidence.R")
```
## Citation
1.	Weller, D. Epi Toolbox for R. 2026. https://github.com/wellerd2/epi-toolbox-r. doi.org/10.5281/zenodo.18509095.
